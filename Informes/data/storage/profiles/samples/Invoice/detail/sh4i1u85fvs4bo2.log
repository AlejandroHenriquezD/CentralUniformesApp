{"type":"operationStart","subtype":"profile","data":{"_id":"p5yJXd6WhycWf64L","timestamp":"2023-02-08T16:22:43.571Z","state":"queued","mode":"standard","creationDate":"2023-02-08T16:22:43.574Z","modificationDate":"2023-02-08T16:22:43.574Z","shortid":"0FkV1Ip","$entitySet":"profiles"},"doDiffs":false,"timestamp":1675873363573,"id":"6onxuup3k5w5x58","previousOperationId":null,"operationId":"5xmhlgmube6v7cm"}
{"type":"log","level":"info","message":"Render request 9 queued for execution and waiting for available worker","previousOperationId":"5xmhlgmube6v7cm","timestamp":1675873363573,"id":"mjss8ievv9s3446"}
{"type":"operationStart","subtype":"render","name":"detail","previousOperationId":"5xmhlgmube6v7cm","timestamp":1675873363594,"id":"kfsa3668zcr5hnv","previousEventId":"6onxuup3k5w5x58","operationId":"v1qwp7pryyaawlw"}
{"type":"log","timestamp":1675873363594,"level":"info","message":"Starting rendering request 9","meta":{"rootId":"sh4i1u85fvs4bo2","id":"sh4i1u85fvs4bo2"},"id":"gk1a8fvcehvlqu0","previousOperationId":"v1qwp7pryyaawlw"}
{"type":"log","timestamp":1675873363596,"level":"info","message":"Rendering template { name: detail, recipe: html-with-browser-client, engine: handlebars, preview: true }","meta":{"rootId":"sh4i1u85fvs4bo2","id":"sh4i1u85fvs4bo2"},"id":"fpgetnb51d5frcu","previousOperationId":"v1qwp7pryyaawlw"}
{"type":"log","timestamp":1675873363599,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"sh4i1u85fvs4bo2","id":"sh4i1u85fvs4bo2"},"id":"d4i2e73dxvnfnya","previousOperationId":"v1qwp7pryyaawlw"}
{"type":"log","timestamp":1675873363607,"level":"debug","message":"Executing script get detail (beforeRender)","meta":{"rootId":"sh4i1u85fvs4bo2","id":"sh4i1u85fvs4bo2"},"id":"bihbuw7oht0bdmm","previousOperationId":"v1qwp7pryyaawlw"}
{"type":"log","timestamp":1675873363632,"level":"warn","message":"Error when processing render request 9\n(because) error when evaluating custom script /samples/Invoice/get detail\nUnable to find module request\r\nThe require calls:\r\nrequire('request')\r\nrequire('D:\\xampp\\htdocs\\central_uniformes\\Informes\\request')\r\nrequire('D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-cli\\lib\\request')\r\n\n\n(sandbox.js line 1:34)\n\n> 1 | var getRequest = require('request').get\n    |                                  ^\n  2 |\n  3 | function beforeRender(req, res, done) {\n  4 |     req.data.CustomerID = req.data.CustomerID || 'AROUT'\n\n(sandbox.js line 29:42)\n\n  27 | }\n\n\nError: Unable to find module request\r\nThe require calls:\r\nrequire('request')\r\nrequire('D:\\xampp\\htdocs\\central_uniformes\\Informes\\request')\r\nrequire('D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-cli\\lib\\request')\r\n\n    at doRequire (D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:308:11)\n    at _require (D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:70:14)\n    at require (D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:112:21)\n    at sandbox.js:1:34\n    at sandbox.js:29:42\n    at Script.runInContext (node:vm:141:12)\n    at run (D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:177:25)\n    at run (D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:184:30)\n    at WorkerReporter._runInSandbox (D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:180:20)\n    at WorkerReporter.runInSandbox (D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:152:17)","meta":{"rootId":"sh4i1u85fvs4bo2","id":"sh4i1u85fvs4bo2"},"id":"zb03bd8a6jacsrk","previousOperationId":"v1qwp7pryyaawlw"}
{"type":"log","timestamp":1675873363632,"level":"warn","message":"Rendering request 9 finished with error in 61 ms","meta":{"rootId":"sh4i1u85fvs4bo2","id":"sh4i1u85fvs4bo2"},"id":"qmrykqjzivweqan","previousOperationId":"v1qwp7pryyaawlw"}
{"type":"error","timestamp":1675873363645,"statusCode":400,"weak":true,"decoratedSuffix":"\n\n(sandbox.js line 1:34)\n\n> 1 | var getRequest = require('request').get\n    |                                  ^\n  2 |\n  3 | function beforeRender(req, res, done) {\n  4 |     req.data.CustomerID = req.data.CustomerID || 'AROUT'\n\n(sandbox.js line 29:42)\n\n  27 | }\n\n","entity":{"shortid":"3Ht3kOPslh","name":"get detail","content":"var getRequest = require('request').get\n\nfunction beforeRender(req, res, done) {\n    req.data.CustomerID = req.data.CustomerID || 'AROUT'\n    \n    var url = 'http://services.odata.org/V4/Northwind/Northwind.svc/Orders?$filter=CustomerID eq \\'' + req.data.CustomerID + '\\''\n    \n    getRequest(url, function (err, resp, body) {\n        if (err) {\n            return done(err)\n        }\n        \n        var orders = JSON.parse(body).value\n        \n        var ordersByQuarter = {};\n        orders.forEach(function (o) {\n            o.OrderDate = new Date(o.OrderDate);\n            var key = o.OrderDate.getFullYear() + '/' + (o.OrderDate.getMonth() + 1);\n            ordersByQuarter[key] = ordersByQuarter[key] || { value: 0, orderDate: o.OrderDate };\n            ordersByQuarter[key].value++;\n        });\n        \n        req.data.orders = ordersByQuarter\n        \n        done()\n    }) \n}"},"property":"content","logged":true,"previousOperationId":"v1qwp7pryyaawlw","id":"ytib2k3l2s90qls","stack":"Error: Unable to find module request\r\nThe require calls:\r\nrequire('request')\r\nrequire('D:\\xampp\\htdocs\\central_uniformes\\Informes\\request')\r\nrequire('D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-cli\\lib\\request')\r\n\n    at doRequire (D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:308:11)\n    at _require (D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:70:14)\n    at require (D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:112:21)\n    at sandbox.js:1:34\n    at sandbox.js:29:42\n    at Script.runInContext (node:vm:141:12)\n    at run (D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:177:25)\n    at run (D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:184:30)\n    at WorkerReporter._runInSandbox (D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:180:20)\n    at WorkerReporter.runInSandbox (D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:152:17)","message":"Error when evaluating custom script /samples/Invoice/get detail\nUnable to find module request\r\nThe require calls:\r\nrequire('request')\r\nrequire('D:\\xampp\\htdocs\\central_uniformes\\Informes\\request')\r\nrequire('D:\\xampp\\htdocs\\central_uniformes\\Informes\\node_modules\\@jsreport\\jsreport-cli\\lib\\request')\r\n\n\n(sandbox.js line 1:34)\n\n> 1 | var getRequest = require('request').get\n    |                                  ^\n  2 |\n  3 | function beforeRender(req, res, done) {\n  4 |     req.data.CustomerID = req.data.CustomerID || 'AROUT'\n\n(sandbox.js line 29:42)\n\n  27 | }\n\n"}
